"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[286],{8286:function(e,s,i){i.r(s),i.d(s,{default:function(){return J}});var t=i(1413),o=i(5671),r=i(3144),n=i(136),l=i(5716),a=i(2791),u=i(885),c="ProfileInfo_descriptionBloch__qJ4Zw",d="ProfileInfo_mainPhoto__XfMvC",p="ProfileInfo_contact__5-BmK",h=i(4374),f=i(184),x=function(e){var s=(0,a.useState)(!1),i=(0,u.Z)(s,2),t=i[0],o=i[1],r=(0,a.useState)(e.status),n=(0,u.Z)(r,2),l=n[0],c=n[1];(0,a.useEffect)((function(){c(e.status)}),[e.status]);return(0,f.jsxs)("div",{children:[!t&&(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Status"}),": ",(0,f.jsx)("span",{onDoubleClick:function(){o(!0)},children:e.status||"----------"})]}),t&&(0,f.jsx)("div",{children:(0,f.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},autoFocus:!0,onBlur:function(){o(!1),e.updateStatus(l)},value:l})})]})},j=i(7425),m=function(e){return(0,f.jsxs)("div",{children:[e.isOwner&&(0,f.jsx)("div",{children:(0,f.jsx)("button",{onClick:e.goToEditMode,children:"edit"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Full name"}),": ",e.profile.fullName]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Looking for a job"}),": ",e.profile.lookingForAJob?"yes":"no"]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"My professional skills"}),": ",e.profile.lookingForAJobDescription]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"About me"}),": ",e.profile.aboutMe]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts"}),": ",Object.keys(e.profile.contacts).map((function(s){var i=e.profile.contacts[s];return(0,f.jsx)(v,{contactTitle:s,contactValue:i},s)}))]})]})},v=function(e){return(0,f.jsxs)("div",{className:p,children:[(0,f.jsx)("b",{children:e.contactTitle}),": ",e.contactValue]})},g=i(81),b=i(5705),k=i(364),P=function(e){var s=(0,k.I0)(),i=(0,b.TA)({initialValues:{fullName:e.profile.fullName,lookingForAJob:e.profile.lookingForAJob,lookingForAJobDescription:e.profile.lookingForAJobDescription,aboutMe:e.profile.aboutMe,contacts:e.profile.contacts},onSubmit:function(t){s((0,g.Ii)(t)),s(e.exitEditMode),i.resetForm()}});return(0,f.jsx)("div",{children:(0,f.jsx)(b.Hy,{value:i,children:(0,f.jsxs)("form",{onSubmit:i.handleSubmit,children:[(0,f.jsx)("div",{children:(0,f.jsx)("button",{type:"submit",children:"save"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Full name"}),": ",(0,f.jsx)("div",{children:(0,f.jsx)("input",(0,t.Z)({placeholder:"Full Name"},i.getFieldProps("fullName")))})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Looking for a job"}),": ",(0,f.jsx)("div",{children:(0,f.jsx)("input",{type:"checkbox",name:"lookingForAJob",onChange:i.handleChange,checked:i.values.lookingForAJob})})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"My professional skills"}),": ",(0,f.jsx)("div",{children:(0,f.jsx)("input",(0,t.Z)({placeholder:"My professional skills"},i.getFieldProps("lookingForAJobDescription")))})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"About me"}),": ",(0,f.jsx)("div",{children:(0,f.jsx)("textarea",(0,t.Z)({placeholder:"About me"},i.getFieldProps("aboutMe")))})]})]})})})},y=function(e){var s=(0,a.useState)(!1),i=(0,u.Z)(s,2),t=i[0],o=i[1];if(!e.profile)return(0,f.jsx)(h.p,{});return(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:c,children:[(0,f.jsx)("img",{src:null!=e.profile.photos.large?e.profile.photos.large:j,className:d}),e.isOwner&&(0,f.jsx)("input",{type:"file",onChange:function(s){s.target.files&&s.target.files.length&&e.savePhoto(s.target.files[0])}}),t?(0,f.jsx)(P,{profile:e.profile,saveProfile:e.saveProfile,exitEditMode:function(){o(!1)}}):(0,f.jsx)(m,{profile:e.profile,isOwner:e.isOwner,goToEditMode:function(){o(!0)}}),(0,f.jsx)(x,{status:e.status,updateStatus:e.updateStatus})]})})},C="MyPosts_postBlock__SV+6r",S="MyPosts_posts__6EdvY",_="Post_item__LRLWK",F=function(e){return(0,f.jsxs)("div",{className:_,children:[(0,f.jsx)("img",{src:"https://w7.pngwing.com/pngs/862/646/png-transparent-beard-hipster-male-man-avatars-xmas-giveaway-icon-thumbnail.png"}),e.message,(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{children:"like "}),e.likeCounts]})]})},M=a.memo((function(e){console.log("RENDER");var s=(0,k.I0)(),i=(0,b.TA)({initialValues:{message:""},validate:function(e){var s,i={};return e.message?(null===(s=e.message)||void 0===s?void 0:s.length)>150&&(i.message="Max length is 150 symbols"):i.message="Required",i},onSubmit:function(e){s((0,g.q2)(e.message)),i.resetForm()}}),o=e.posts.map((function(e){return(0,f.jsx)("div",{children:(0,f.jsx)(F,{message:e.message,likeCounts:e.likesCounts})},e.id)}));return(0,f.jsxs)("div",{className:C,children:[(0,f.jsx)("h3",{children:"My posts"}),(0,f.jsx)(b.Hy,{value:i,children:(0,f.jsxs)("form",{onSubmit:i.handleSubmit,children:[(0,f.jsx)("input",(0,t.Z)({placeholder:"Enter you text"},i.getFieldProps("message"))),i.touched.message&&i.errors.message&&(0,f.jsx)("div",{style:{color:"red"},children:i.errors.message}),(0,f.jsx)("button",{type:"submit",children:"Submit"})]})}),(0,f.jsx)("div",{className:S,children:o})]})})),T=(0,k.$j)((function(e){return{posts:e.profilePage.posts}}))(M),A=function(e){return(0,f.jsxs)("div",{children:[(0,f.jsx)(y,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,f.jsx)(T,{})]})},w=i(9271),I=i(7781),N=i(5571),Z=function(e){(0,n.Z)(i,e);var s=(0,l.Z)(i);function i(){return(0,o.Z)(this,i),s.apply(this,arguments)}return(0,r.Z)(i,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfileTC(e),this.props.getStatusTC(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,s,i){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return this.props.profile?(0,f.jsx)(A,(0,t.Z)((0,t.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatusTC,savePhoto:this.props.savePhotoTC,saveProfile:this.props.saveProfileTC})):null}}]),i}(a.Component),J=(0,I.qC)((0,k.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfileTC:g.et,getStatusTC:g.lR,updateStatusTC:g.Nf,savePhotoTC:g.Ju,saveProfileTC:g.Ii}),w.EN,N.D)(Z)}}]);
//# sourceMappingURL=286.31b3b89f.chunk.js.map